import tkinter as tk
from tkinter import messagebox
from PIL import Image, ImageTk
from random import choice as randchoice

# colors
COLORS = {
    "header_bg": "#A4A",
    "chat_bg": "#999",
    "user_msg_bg": "#85993C",
    "bot_msg_bg": "#6A8DA9",
    "input_bar_bg": "#444",
}
# values
GREETING = """
üëã –ü—Ä–∏–≤—ñ—Ç!
–Ø ‚Äî —Ç–≤—ñ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π –º–µ–º–æ–ª–æ–≥-–∞–Ω–∞–ª—ñ—Ç–∏–∫, —ñ —è –¥–æ–ø–æ–º–æ–∂—É –≤–∏–∑–Ω–∞—á–∏—Ç–∏, –Ω–∞ —è–∫–æ–≥–æ —ñ—Ç–∞–ª—ñ–π—Å—å–∫–æ–≥–æ –º–µ–º–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ —Ç–∏ –Ω–∞–π–±—ñ–ª—å—à–µ —Å—Ö–æ–∂–∏–π üòé
–£—Å–µ –ø—Ä–æ—Å—Ç–æ: —è –ø–æ—Å—Ç–∞–≤–ª—é —Ç–æ–±—ñ –∫—ñ–ª—å–∫–∞ –≤–µ—Å–µ–ª–∏—Ö, –∞–ª–µ —Ç—Ä–æ—Ö–∏ —Ñ—ñ–ª–æ—Å–æ—Ñ—Å—å–∫–∏—Ö –∑–∞–ø–∏—Ç–∞–Ω—å. –í—ñ–¥–ø–æ–≤—ñ–¥–∞–π —á–µ—Å–Ω–æ, –∑ –≥—É–º–æ—Ä–æ–º –∞–±–æ —è–∫ –≤—ñ–¥—á—É–≤–∞—î—à ‚Äî —ñ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ç–≤–æ—ó—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π —è –ø—Ä–æ–∞–Ω–∞–ª—ñ–∑—É—é —Ç–≤–æ—é –µ–Ω–µ—Ä–≥–µ—Ç–∏–∫—É, —Å—Ç–∏–ª—å –º–∏—Å–ª–µ–Ω–Ω—è —Ç–∞ –≤–∞–π–± üåÄ
–£ —Ñ—ñ–Ω–∞–ª—ñ —Ç–∏ –æ—Ç—Ä–∏–º–∞—î—à –º–µ–º-–∞–ª—å—Ç–µ—Ä-–µ–≥–æ, —è–∫–µ –Ω–∞–π—Ç–æ—á–Ω—ñ—à–µ —Ä–µ–∑–æ–Ω—É—î –∑ —Ç–≤–æ—î—é —Å—É—Ç–Ω—ñ—Å—Ç—é ‚ú®
–ì–æ—Ç–æ–≤–∏–π(-–∞)? –¢–æ–¥—ñ –ø–æ—á–Ω—ñ–º–æ üî•
"""
QUESTIONS = [
    "–Ø–∫ –±–∏ —Ç–∏ –æ–ø–∏—Å–∞–≤ —Å–≤—ñ–π –Ω–∞—Å—Ç—Ä—ñ–π —É —Ç—Ä—å–æ—Ö —Å–ª–æ–≤–∞—Ö?",
    "–¢–∏ –±—ñ–ª—å—à–µ –º—Ä—ñ–π–Ω–∏–∫, –ª–æ–≥—ñ–∫ —á–∏ –±–æ–∂–µ–≤—ñ–ª—å–Ω–∏–π –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ç–æ—Ä?",
    "–Ø–∫—É —Ç–≤–∞—Ä–∏–Ω—É —Ç–∏ –± –æ–±—Ä–∞–≤ —è–∫ —Å–≤—ñ–π —Å–∏–º–≤–æ–ª?",
    "–ß–∏ –ª—é–±–∏—à —Ç–∏ –ø–æ—Ä—è–¥–æ–∫, —á–∏ –ø–æ–≤–Ω–∏–π —Ö–∞–æ—Å?",
    "–©–æ —Ç–µ–±–µ –±—ñ–ª—å—à–µ –ø—Ä–∏–≤–∞–±–ª—é—î: –º—É–∑–∏–∫–∞, –≥—É–º–æ—Ä, –º–∞–≥—ñ—è —á–∏ –Ω–∞—É–∫–∞?",
    "–¢–≤–æ—è —ñ–¥–µ–∞–ª—å–Ω–∞ —Ä–µ–∞–∫—Ü—ñ—è –Ω–∞ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç ‚Äî –∂–∞—Ä—Ç, –≤—Ç–µ—á–∞, –∞—Ç–∞–∫–∞ —á–∏ —ñ–≥–Ω–æ—Ä?",
    "–¢–æ–±—ñ –±–ª–∏–∂—á–µ –≥—Ä–∞—Ü—ñ–π–Ω—ñ—Å—Ç—å, —Å–∏–ª–∞, —à–≤–∏–¥–∫—ñ—Å—Ç—å —á–∏ –∑–∞–≥–∞–¥–∫–æ–≤—ñ—Å—Ç—å?",
    "–Ø–∫—â–æ –± —Ç–µ–±–µ –∑–∞–ø—Ä–æ—Å–∏–ª–∏ –≤ –º—É–ª—å—Ç—Ñ—ñ–ª—å–º ‚Äî —è–∫–∏–º –±—É–≤ –±–∏ —Ç–≤—ñ–π –≥–æ–ª–æ—Å?",
    "–¢–∏ –±—ñ–ª—å—à–µ –ø—Ä–æ –ª–æ–≥—ñ–∫—É —á–∏ –µ–º–æ—Ü—ñ—ó?",
    "–Ø–∫–±–∏ —Ç–∏ –±—É–≤ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º, —Ç–∏ –± –±—É–≤ –≥–µ—Ä–æ—î–º, –∞–Ω—Ç–∏–≥–µ—Ä–æ—î–º —á–∏ –ø—Ä–æ—Å—Ç–æ –¥–∏–≤–∞–∫–æ–º?"
]
CHARACTERS = {
    "Bobrito Bandito": {
        "description": "–¢–∏ ‚Äî –∂–∏—Ç—Ç—î—Ä–∞–¥—ñ—Å–Ω–∏–π –∞–≤–∞–Ω—Ç—é—Ä–∏—Å—Ç —ñ–∑ —à–∞—Ä–º–æ–º –±–∞–Ω–¥–∏—Ç–∞. –¢–≤–æ—è —Ö–∞—Ä–∏–∑–º–∞, –≥—É–º–æ—Ä —ñ –ª—é–±–æ–≤ –¥–æ –ø—Ä–∏–≥–æ–¥ —Ä–æ–±–ª—è—Ç—å —Ç–µ–±–µ –¥—É—à–µ—é –∫–æ–º–ø–∞–Ω—ñ—ó. –¢–∏ –≤–º—ñ—î—à –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ –≤–∏—Ö—ñ–¥ –∑ –±—É–¥—å-—è–∫–æ—ó —Å–∏—Ç—É–∞—Ü—ñ—ó, –¥–æ–¥–∞—é—á–∏ —ó–π –ø—ñ–∫–∞–Ω—Ç–Ω–æ—Å—Ç—ñ —Ç–∞ –≤–µ—Å–µ–ª–æ—â—ñ–≤.",
        "keywords": ["–∞–≤–∞–Ω—Ç—é—Ä–∞", "–≥—É–º–æ—Ä", "—Ö–∞—Ä–∏–∑–º–∞", "–ø—Ä–∏–≥–æ–¥–∏", "–µ–Ω–µ—Ä–≥—ñ–π–Ω—ñ—Å—Ç—å", "—Ö–æ–ª–æ–¥–Ω–æ–∫—Ä–æ–≤–Ω—ñ—Å—Ç—å", "—Ä–∏–∑–∏–∫"],
    },
    "Shpioniro Golubiro": {
        "description": "–¢–∏ ‚Äî —É–≤–∞–∂–Ω–∏–π —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á, —è–∫–∏–π –∑–∞–≤–∂–¥–∏ –Ω–∞ –∫—Ä–æ–∫ –ø–æ–ø–µ—Ä–µ–¥—É. –¢–≤–æ—è —Å–µ—Ä–π–æ–∑–Ω—ñ—Å—Ç—å —ñ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø–æ–º—ñ—á–∞—Ç–∏ –¥–µ—Ç–∞–ª—ñ —Ä–æ–±–ª—è—Ç—å —Ç–µ–±–µ –º–∞–π—Å—Ç—Ä–æ–º –∞–Ω–∞–ª—ñ–∑—É. –¢–∏ –≤–º—ñ—î—à –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Å–ø–æ–∫—ñ–π –Ω–∞–≤—ñ—Ç—å —É –Ω–∞–π–Ω–∞–ø—Ä—É–∂–µ–Ω—ñ—à–∏—Ö —Å–∏—Ç—É–∞—Ü—ñ—è—Ö.",
        "keywords": ["—Å–ø–æ—Å—Ç–µ—Ä–µ–∂–ª–∏–≤—ñ—Å—Ç—å", "–∞–Ω–∞–ª—ñ—Ç–∏—á–Ω—ñ—Å—Ç—å", "—Å–µ—Ä–π–æ–∑–Ω—ñ—Å—Ç—å", "–æ–±–µ—Ä–µ–∂–Ω—ñ—Å—Ç—å", "—ñ–Ω—Ç–µ–ª–µ–∫—Ç"],
    },
    "Cappuccino Asassino": {
        "description": "–¢–∏ ‚Äî –ø–æ—î–¥–Ω–∞–Ω–Ω—è –≤–∏—Ç–æ–Ω—á–µ–Ω–æ—Å—Ç—ñ —Ç–∞ —Ä—ñ—à—É—á–æ—Å—Ç—ñ. –ó–æ–≤–Ω—ñ —Ç–∏ —Å–ø–æ–∫—ñ–π–Ω–∏–π —ñ –ø—Ä–∏–≤–∞–±–ª–∏–≤–∏–π, –∞–ª–µ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ø—Ä–∏—Ö–æ–≤—É—î—à —Å–∏–ª—É —Ç–∞ —Ü—ñ–ª–µ—Å–ø—Ä—è–º–æ–≤–∞–Ω—ñ—Å—Ç—å. –¢–≤–æ—è –¥–≤–æ–∑–Ω–∞—á–Ω—ñ—Å—Ç—å —Ä–æ–±–∏—Ç—å —Ç–µ–±–µ –∑–∞–≥–∞–¥–∫–æ–≤–∏–º —ñ –ø—Ä–∏–≤–∞–±–ª–∏–≤–∏–º –¥–ª—è –æ—Ç–æ—á—É—é—á–∏—Ö.",
        "keywords": ["–≤–∏—Ç–æ–Ω—á–µ–Ω—ñ—Å—Ç—å", "—Ä—ñ—à—É—á—ñ—Å—Ç—å", "–∑–∞–≥–∞–¥–∫–æ–≤—ñ—Å—Ç—å", "—Å–ø–æ–∫—ñ–π", "—Ü—ñ–ª–µ—Å–ø—Ä—è–º–æ–≤–∞–Ω—ñ—Å—Ç—å"],
    },
    "Tralalero Tralala": {
        "description": "–¢–∏ ‚Äî –≤—Ç—ñ–ª–µ–Ω–Ω—è —Ä–∞–¥–æ—Å—Ç—ñ —Ç–∞ –±–µ–∑—Ç—É—Ä–±–æ—Ç–Ω–æ—Å—Ç—ñ. –¢–≤–æ—è –ª—é–±–æ–≤ –¥–æ –º—É–∑–∏–∫–∏ —ñ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ –ø–æ–∑–∏—Ç–∏–≤ —É –≤—Å—å–æ–º—É —Ä–æ–±–ª—è—Ç—å —Ç–µ–±–µ –¥–∂–µ—Ä–µ–ª–æ–º –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è –¥–ª—è —ñ–Ω—à–∏—Ö. –¢–∏ –≤–º—ñ—î—à –ø–µ—Ä–µ—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –±—É–¥–µ–Ω–Ω—ñ—Å—Ç—å –Ω–∞ —Å–≤—è—Ç–æ.",
        "keywords": ["—Ä–∞–¥—ñ—Å—Ç—å", "–º—É–∑–∏–∫–∞", "–æ–ø—Ç–∏–º—ñ–∑–º", "—Ç–≤–æ—Ä—á—ñ—Å—Ç—å", "–±–µ–∑—Ç—É—Ä–±–æ—Ç–Ω—ñ—Å—Ç—å"],
    },
    "Crocodildo Penisini": {
        "description": "–¢–∏ ‚Äî –ø–æ—î–¥–Ω–∞–Ω–Ω—è –¥–∏–∫–æ—Å—Ç—ñ —Ç–∞ –≥—É–º–æ—Ä—É. –¢–≤–æ—è –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –ª–∞–º–∞—Ç–∏ —Å—Ç–µ—Ä–µ–æ—Ç–∏–ø–∏ —ñ –ø—Ä–æ–≤–æ–∫—É–≤–∞—Ç–∏ —Å–º—ñ—Ö —Ä–æ–±–∏—Ç—å —Ç–µ–±–µ –Ω–µ–∑–∞–±—É—Ç–Ω—ñ–º. –¢–∏ –Ω–µ –±–æ—ó—à—Å—è –±—É—Ç–∏ —Å–æ–±–æ—é —ñ –≤—Ä–∞–∂–∞—Ç–∏ –æ—Ç–æ—á—É—é—á–∏—Ö —Å–≤–æ—î—é —É–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—é.",
        "keywords": ["–≥—É–º–æ—Ä", "–¥–∏–∫—ñ—Å—Ç—å", "—Å–∞–º–æ–≤–∏—Ä–∞–∂–µ–Ω–Ω—è", "–ø—Ä–æ–≤–æ–∫–∞—Ü—ñ—è", "—É–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å"],
    },
    "Lirili Larila": {
        "description": "–¢–∏ ‚Äî –º—Ä—ñ–π–Ω–∏–∫ –∑ –±–∞–≥–∞—Ç–æ—é —É—è–≤–æ—é. –¢–≤–æ—è –Ω—ñ–∂–Ω—ñ—Å—Ç—å —ñ –ª—é–±–æ–≤ –¥–æ —Ñ–∞–Ω—Ç–∞–∑—ñ–π–Ω–æ–≥–æ —Å–≤—ñ—Ç—É —Ä–æ–±–ª—è—Ç—å —Ç–µ–±–µ —á–∞—Ä—ñ–≤–Ω–∏–º —ñ –ø—Ä–∏–≤–∞–±–ª–∏–≤–∏–º. –¢–∏ –≤–º—ñ—î—à –±–∞—á–∏—Ç–∏ –∫—Ä–∞—Å—É –≤ –¥—Ä—ñ–±–Ω–∏—Ü—è—Ö —ñ –Ω–∞–¥–∏—Ö–∞—Ç–∏ —ñ–Ω—à–∏—Ö –Ω–∞ –º—Ä—ñ—ó.",
        "keywords": ["–º—Ä—ñ–π–ª–∏–≤—ñ—Å—Ç—å", "—Ñ–∞–Ω—Ç–∞–∑—ñ—è", "–Ω—ñ–∂–Ω—ñ—Å—Ç—å", "—á–∞—Ä—ñ–≤–Ω—ñ—Å—Ç—å", "—ñ–Ω—Ç—É—ó—Ü—ñ—è"],
    },
    "Boneca Ambalabu": {
        "description": "–¢–∏ ‚Äî –≤—Ç—ñ–ª–µ–Ω–Ω—è –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Ç–∞ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –º–∏—Å–ª–µ–Ω–Ω—è. –¢–≤–æ—è –ª—é–±–æ–≤ –¥–æ –∞–±—Å—É—Ä–¥—É —ñ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –±–∞—á–∏—Ç–∏ —Å–≤—ñ—Ç –ø—ñ–¥ —ñ–Ω—à–∏–º –∫—É—Ç–æ–º —Ä–æ–±–ª—è—Ç—å —Ç–µ–±–µ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º. –¢–∏ –≤–º—ñ—î—à –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ —Ä–∞–¥—ñ—Å—Ç—å —É –Ω–µ—Å–ø–æ–¥—ñ–≤–∞–Ω–æ–º—É.",
        "keywords": ["–∫—Ä–µ–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å", "–∞–±—Å—É—Ä–¥", "–Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ—Å—Ç—å", "–≥—É–º–æ—Ä", "—É—è–≤–∞"],
    },
    "U Din Din Din Dun": {
        "description": "–¢–∏ ‚Äî –µ–Ω–µ—Ä–≥—ñ–π–Ω–∏–π —Ç–∞ –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω–∏–π. –¢–≤–æ—è –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Ä–∏—Ç–º —ñ –¥—ñ—è—Ç–∏ –∑–ª–∞–≥–æ–¥–∂–µ–Ω–æ —Ä–æ–±–∏—Ç—å —Ç–µ–±–µ –Ω–∞–¥—ñ–π–Ω–∏–º –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º. –¢–∏ –≤–º—ñ—î—à –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –≤ –∫–æ–º–∞–Ω–¥—ñ —Ç–∞ –¥–æ—Å—è–≥–∞—Ç–∏ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—Ö —Ü—ñ–ª–µ–π.",
        "keywords": ["–µ–Ω–µ—Ä–≥—ñ–π–Ω—ñ—Å—Ç—å", "–æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω—ñ—Å—Ç—å", "—Ä–∏—Ç–º", "–Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å", "–µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å", "–¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∞", "–º'—è–∑–∏"],
    },
    "Bri Bri Bicus Discus": {
        "description": "–¢–∏ ‚Äî —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª –∑ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º –º–∏—Å–ª–µ–Ω–Ω—è–º. –¢–≤–æ—è –ª—é–±–æ–≤ –¥–æ –∑–Ω–∞–Ω—å —ñ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –±–∞—á–∏—Ç–∏ –≥–ª–∏–±–æ–∫—ñ –∑–≤'—è–∑–∫–∏ —Ä–æ–±–ª—è—Ç—å —Ç–µ–±–µ —Ü—ñ–∫–∞–≤–∏–º —Å–ø—ñ–≤—Ä–æ–∑–º–æ–≤–Ω–∏–∫–æ–º. –¢–∏ –≤–º—ñ—î—à –ø–æ—î–¥–Ω—É–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –∑ –∫—Ä–µ–∞—Ç–∏–≤–Ω—ñ—Å—Ç—é.",
        "keywords": ["—ñ–Ω—Ç–µ–ª–µ–∫—Ç", "–∫—Ä–µ–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å", "–∞–Ω–∞–ª—ñ—Ç–∏—á–Ω—ñ—Å—Ç—å", "–¥–æ—Å–ª—ñ–¥–Ω–∏–∫", "–Ω–æ–≤–∞—Ç–æ—Ä—Å—Ç–≤–æ"],
    },
    "Ballerina Cappuccina": {
        "description": "–¢–∏ ‚Äî –ø–æ—î–¥–Ω–∞–Ω–Ω—è –≥—Ä–∞—Ü—ñ—ó —Ç–∞ –ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç—ñ. –¢–≤–æ—è –≤–∏—Ç–æ–Ω—á–µ–Ω—ñ—Å—Ç—å —ñ –µ–º–æ—Ü—ñ–π–Ω—ñ—Å—Ç—å —Ä–æ–±–ª—è—Ç—å —Ç–µ–±–µ —è—Å–∫—Ä–∞–≤–æ—é –æ—Å–æ–±–∏—Å—Ç—ñ—Å—Ç—é. –¢–∏ –≤–º—ñ—î—à –≤–∏—Ä–∞–∂–∞—Ç–∏ —Å–µ–±–µ —á–µ—Ä–µ–∑ —Ä—É—Ö —ñ –Ω–∞–¥–∏—Ö–∞—Ç–∏ —ñ–Ω—à–∏—Ö —Å–≤–æ—î—é –µ–Ω–µ—Ä–≥—ñ—î—é.",
        "keywords": ["–≥—Ä–∞—Ü—ñ—è", "–µ–º–æ—Ü—ñ–π–Ω—ñ—Å—Ç—å", "–µ–Ω–µ—Ä–≥—ñ—è", "–≤–∏—Ä–∞–∑–Ω—ñ—Å—Ç—å", "–Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è"],
    },
    "Bluberini Octopussini": {
        "description": "–¢–∏ ‚Äî –≤—ñ–¥–∫—Ä–∏—Ç–∏–π —ñ –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∏–π. –¢–≤–æ—è –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –∑–≤'—è–∑–∫–∏ —ñ –∞–¥–∞–ø—Ç—É–≤–∞—Ç–∏—Å—è –¥–æ –Ω–æ–≤–∏—Ö —Å–∏—Ç—É–∞—Ü—ñ–π —Ä–æ–±–∏—Ç—å —Ç–µ–±–µ —Ü—ñ–Ω–Ω–∏–º —á–ª–µ–Ω–æ–º –±—É–¥—å-—è–∫–æ—ó —Å–ø—ñ–ª—å–Ω–æ—Ç–∏. –¢–∏ –≤–º—ñ—î—à –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ —Å–ø—ñ–ª—å–Ω—É –º–æ–≤—É –∑ —Ä—ñ–∑–Ω–∏–º–∏ –ª—é–¥—å–º–∏.",
        "keywords": ["–∫–æ–º—É–Ω—ñ–∫–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å", "–∞–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å", "–¥—Ä—É–∂–µ–ª—é–±–Ω—ñ—Å—Ç—å", "–≥–Ω—É—á–∫—ñ—Å—Ç—å", "–µ–º–ø–∞—Ç—ñ—è"],
    },
    "Brr Brr Patapim": {
        "description": "–¢–∏ ‚Äî –µ–Ω–µ—Ä–≥—ñ–π–Ω–∏–π —ñ –≥—Ä–∞–π–ª–∏–≤–∏–π. –¢–≤–æ—è –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø–µ—Ä–µ—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –±—É–¥–µ–Ω–Ω—ñ—Å—Ç—å –Ω–∞ –≥—Ä—É —ñ –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ —Ä–∞–¥—ñ—Å—Ç—å —É –ø—Ä–æ—Å—Ç–∏—Ö —Ä–µ—á–∞—Ö —Ä–æ–±–∏—Ç—å —Ç–µ–±–µ –¥–∂–µ—Ä–µ–ª–æ–º –ø–æ–∑–∏—Ç–∏–≤—É –¥–ª—è –æ—Ç–æ—á—É—é—á–∏—Ö.",
        "keywords": ["–µ–Ω–µ—Ä–≥—ñ–π–Ω—ñ—Å—Ç—å", "–≥—Ä–∞–π–ª–∏–≤—ñ—Å—Ç—å", "–æ–ø—Ç–∏–º—ñ–∑–º", "—Ç–≤–æ—Ä—á—ñ—Å—Ç—å", "–¥–∏—Ç—è—á—ñ—Å—Ç—å"],
    },
    "Bambini Crossini": {
        "description": "–¢–∏ ‚Äî —Å—Ç–∏–ª—å–Ω–∏–π —ñ –≤–ø–µ–≤–Ω–µ–Ω–∏–π —É —Å–æ–±—ñ. –¢–≤–æ—è –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø–æ—î–¥–Ω—É–≤–∞—Ç–∏ –¥–∏—Ç—è—á—É –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—ñ—Å—Ç—å –∑ –¥–æ—Ä–æ—Å–ª–æ—é —Å–µ—Ä–π–æ–∑–Ω—ñ—Å—Ç—é —Ä–æ–±–∏—Ç—å —Ç–µ–±–µ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º. –¢–∏ –≤–º—ñ—î—à –ø—Ä–∏–≤–µ—Ä—Ç–∞—Ç–∏ —É–≤–∞–≥—É —ñ –∑–∞–ª–∏—à–∞—Ç–∏ —è—Å–∫—Ä–∞–≤–µ –≤—Ä–∞–∂–µ–Ω–Ω—è.",
        "keywords": ["—Å—Ç–∏–ª—å", "–≤–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å", "—Ö–∞—Ä–∏–∑–º–∞", "—É–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å", "—Å–∞–º–æ–≤–∏—Ä–∞–∂–µ–Ω–Ω—è"],
    },
    "Ketupat Kepat Prekupat Kepat Kepet Kepot": {
        "description": "–¢–∏ ‚Äî –≤—Ç—ñ–ª–µ–Ω–Ω—è —Ö–∞–æ—Å—É —ñ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—ñ. –¢–≤–æ—è –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤–µ –∑ –Ω—ñ—á–æ–≥–æ —ñ –±–∞—á–∏—Ç–∏ —Å–≤—ñ—Ç —É –Ω–µ–∑–≤–∏—á–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ö —Ä–æ–±–∏—Ç—å —Ç–µ–±–µ –¥–∂–µ—Ä–µ–ª–æ–º –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è –¥–ª—è —ñ–Ω—à–∏—Ö. –¢–∏ –≤–º—ñ—î—à –ª–∞–º–∞—Ç–∏ —Å—Ç–µ—Ä–µ–æ—Ç–∏–ø–∏ —ñ –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ –Ω–æ–≤—ñ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∏.",
        "keywords": ["–∫—Ä–µ–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å", "—Ö–∞–æ—Å", "—ñ–Ω–Ω–æ–≤–∞—Ü—ñ—ó", "–Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ—Å—Ç—å", "–Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è"],
    },
    "Tung Tung Tung Tung Tung Tung Sahur": {
        "description": "–¢–∏ ‚Äî —Ä–∏—Ç–º—ñ—á–Ω–∏–π —ñ –Ω–∞–ø–æ–ª–µ–≥–ª–∏–≤–∏–π. –¢–≤–æ—è –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Ç–µ–º–ø —ñ –º–æ—Ç–∏–≤—É–≤–∞—Ç–∏ —ñ–Ω—à–∏—Ö —Ä–æ–±–∏—Ç—å —Ç–µ–±–µ –ª—ñ–¥–µ—Ä–æ–º. –¢–∏ –≤–º—ñ—î—à –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–æ—Ü–µ—Å–∏ —ñ –¥–æ—Å—è–≥–∞—Ç–∏ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—Ö —Ü—ñ–ª–µ–π.",
        "keywords": ["—Ä–∏—Ç–º", "–Ω–∞–ø–æ–ª–µ–≥–ª–∏–≤—ñ—Å—Ç—å", "–æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω—ñ—Å—Ç—å", "–º–æ—Ç–∏–≤–∞—Ü—ñ—è", "–ª—ñ–¥–µ—Ä—Å—Ç–≤–æ"],
    }
}

for key in CHARACTERS.keys():
    CHARACTERS[key]["image_path"] = f"images//{key}.png"


class Bot:
    _instance = None
    _initialized = False

    def __new__(cls, *args, **kwargs):
        if cls._instance is None:
            cls._instance = super().__new__(cls)
        return cls._instance

    def __init__(self):
        if not self._initialized:
            self.questions = QUESTIONS.copy()

            self._initialized = True

    def __get_rand_question(self):
        if self.questions:
            question = randchoice(self.questions)
            self.questions.remove(question)
            return question

        return None

    def get_greeting(self):
        return GREETING

    def get_question(self):
        question = self.__get_rand_question()
        if question:
            return question

    def get_result(self):
        pass

    def receive_message(self, message):
        self.get_question()


class Application(tk.Tk):
    def __init__(self):
        super().__init__()
        self.title("Italian brainrot")
        self.geometry("400x500")

        self.message_labels = []
        self.bot = Bot()
        self.input_msg_var = tk.StringVar()

        self.build_interface()

        self.add_message(self.bot.get_greeting(), from_user=False)
        question = self.bot.get_question()
        self.add_message(question, from_user=False)

    def build_interface(self):
        # --- header ---
        header_frame = tk.Frame(self, bg=COLORS["header_bg"])
        header_frame.pack(side=tk.TOP, fill=tk.X)

        bot_icon_src = Image.open("images\\bot_icon.png")
        self.bot_icon = ImageTk.PhotoImage(bot_icon_src.resize((40, 40)))

        label_icon = tk.Label(header_frame, image=self.bot_icon, text="üñº", bg=COLORS["header_bg"])
        label_icon.grid(row=0, column=0, padx=10, pady=2)

        label_title = tk.Label(header_frame, text="Memzer UA", bg=COLORS["header_bg"], font=("consolas", 15))
        label_title.grid(row=0, column=1, padx=10)

        # --- scrolable frame ---
        # –û—Å–Ω–æ–≤–Ω–∞ –æ–±–ª–∞—Å—Ç—å –¥–ª—è —á–∞—Ç—É
        content_frame = tk.Frame(self)
        content_frame.pack(fill="both", expand=True)

        # –°—Ç–≤–æ—Ä—é—î–º–æ –ø–æ–ª–æ—Ç–Ω–æ (Canvas) –∑ –ø—Ä–æ–∫—Ä—É—Ç–∫–æ—é
        self.canvas = tk.Canvas(content_frame, bg=COLORS["chat_bg"])
        scrollbar = tk.Scrollbar(content_frame, orient="vertical", command=self.canvas.yview)
        self.chat_frame = tk.Frame(self.canvas, bg=COLORS["chat_bg"], pady=10)

        # –ü—Ä–∏–≤'—è–∑–∫–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
        __on_frame_configure = lambda event: self.canvas.configure(scrollregion=self.canvas.bbox("all"))
        self.chat_frame.bind("<Configure>", __on_frame_configure)
        __on_mousewheel = lambda event: self.canvas.yview_scroll(int(-1 * (event.delta / 120)), "units")
        self.canvas.bind_all("<MouseWheel>", __on_mousewheel)

        # –í–±—É–¥–æ–≤—É—î–º–æ scrollable_frame —É canvas
        self.scrollable_frame = self.canvas.create_window((0, 0), window=self.chat_frame)
        self.canvas.configure(yscrollcommand=scrollbar.set)
        self.canvas.bind("<Configure>", self.__on_canvas_resize)

        # –†–æ–∑–º—ñ—â–µ–Ω–Ω—è
        self.canvas.pack(side="left", fill="both", expand=True)
        scrollbar.pack(side="right", fill="y")

        # --- input bar ---
        input_bar = tk.Frame(self, bg=COLORS["input_bar_bg"])
        input_bar.pack(side=tk.BOTTOM, fill=tk.X, ipady=5, ipadx=5)

        message_entry = tk.Entry(input_bar, textvariable=self.input_msg_var)
        message_entry.bind("<Return>", self.send_answer)
        send_button = tk.Button(
            input_bar, command=self.send_answer,
            text="üîº"
        )

        send_button.pack(side=tk.RIGHT, padx=(5,10))
        message_entry.pack(fill=tk.X, expand=True, padx=10)

        # --- TODO: test button ---
        test_b_frame = tk.Frame(self, bg="#fff")

        send_question_b = tk.Button(
            test_b_frame, command=lambda: self.bot.get_question,
            text="Question"
        )
        send_res_b = tk.Button(
            test_b_frame, command=lambda: self.bot.send_result,
            text="Result"
        )

        test_b_frame.pack(side=tk.BOTTOM, fill=tk.X)
        send_question_b.pack(side=tk.LEFT)
        send_res_b.pack(side=tk.LEFT)

    def __on_canvas_resize(self, event):
        self.canvas.itemconfig(self.scrollable_frame, width=event.width)

        for label in self.message_labels:
            label.config(wraplength=event.width//2)

    def send_answer(self, event=None):
        message = self.input_msg_var.get()
        if message:
            self.add_message(message)
            self.input_msg_var.set("")

            question = self.bot.get_question()
            self.add_message(question, from_user=False)

    def add_message(self, message, from_user=True):
        if message:
            container = tk.Frame(self.chat_frame, bg=COLORS["chat_bg"])
            container.pack(side=tk.TOP, fill=tk.X, expand=True)
            label = tk.Label(
                container, text=message, justify=tk.LEFT,
                bg=COLORS["user_msg_bg"] if from_user else COLORS["bot_msg_bg"],
                wraplength=self.canvas.winfo_width()//2
            )
            label.pack(padx=10, pady=2, ipadx=5, ipady=5, anchor="e" if from_user else "w")
            self.message_labels.append(label)
            self.canvas.yview_moveto(1.0)


if __name__ == "__main__":
    app = Application()
    app.mainloop()
